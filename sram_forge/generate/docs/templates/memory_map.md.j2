# {{ chip.name }} Memory Map

## Overview

| Parameter | Value |
|-----------|-------|
| Total Capacity | {{ total_words }} words |
| Data Width | {{ data_width }} bits |
| Address Width | {{ addr_bits }} bits |
| Address Range | 0x0000 - 0x{{ '%04X' | format(total_words - 1) }} |

## Memory Organization

The memory consists of {{ sram_count }} SRAM macros, each providing
{{ sram.size }} x {{ sram.width }}-bit storage.

### SRAM Block Map

| Block | SRAM Index | Start Address | End Address | Size |
|-------|------------|---------------|-------------|------|
{% for region in regions %}
| SRAM {{ region.index }} | {{ region.index }} | 0x{{ '%04X' | format(region.start) }} | 0x{{ '%04X' | format(region.end) }} | {{ region.size }} words |
{% endfor %}

## Address Decoding

```
Address Bus [{{ addr_bits - 1 }}:0]
     |
     +---> Upper bits [{{ addr_bits - 1 }}:{{ (sram.size - 1).bit_length() }}] --> SRAM Select ({{ sram_count }} blocks)
     |
     +---> Lower bits [{{ (sram.size - 1).bit_length() - 1 }}:0] --> Word Address ({{ sram.size }} words)
```

### Decoding Logic

- SRAM select bits: {{ addr_bits - (sram.size - 1).bit_length() }}
- Word address bits: {{ (sram.size - 1).bit_length() }}
- Total address bits: {{ addr_bits }}

## Memory Layout Diagram

```
+-------------------+ 0x{{ '%04X' | format(total_words - 1) }} ({{ total_words - 1 }})
|                   |
|   SRAM {{ sram_count - 1 }}         |
|                   |
+-------------------+ 0x{{ '%04X' | format((sram_count - 1) * sram.size) }}
|       ...         |
+-------------------+
|                   |
|   SRAM 1          |
|                   |
+-------------------+ 0x{{ '%04X' | format(sram.size) }} ({{ sram.size }})
|                   |
|   SRAM 0          |
|                   |
+-------------------+ 0x0000 (0)
```

## Access Examples

### First SRAM (Block 0)
- Address range: 0x0000 - 0x{{ '%04X' | format(sram.size - 1) }}
- Example: Write to address 0x0000
  ```
  addr = 0x0000
  din  = 0xAB
  ce_n = 0
  we_n = 0
  ```

### Last SRAM (Block {{ sram_count - 1 }})
- Address range: 0x{{ '%04X' | format((sram_count - 1) * sram.size) }} - 0x{{ '%04X' | format(total_words - 1) }}
- Example: Read from last address
  ```
  addr = 0x{{ '%04X' | format(total_words - 1) }}
  ce_n = 0
  we_n = 1
  // dout available after tAA
  ```

## Notes

1. All addresses are word addresses (not byte addresses)
2. Out-of-range addresses (>= 0x{{ '%04X' | format(total_words) }}) are undefined
3. Address decoding is combinational, selected on clock edge

---

*Generated by sram-forge*
