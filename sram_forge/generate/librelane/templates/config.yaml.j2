# LibreLane Configuration
# Generated by sram-forge
# Chip: {{ chip.name }}
{% if chip.description %}# {{ chip.description }}{% endif %}

DESIGN_NAME: "{{ chip.name }}_top"

# Clock configuration
CLOCK_PORT: "clk_pad"
CLOCK_PERIOD: {{ clock_period_ns }}

# Die and core areas [x_min, y_min, x_max, y_max] in microns
DIE_AREA: [{{ die_area | join(', ') }}]
CORE_AREA: [{{ core_area | join(', ') }}]

# PDK configuration
PDK: "gf180mcuD"
STD_CELL_LIBRARY: "gf180mcu_fd_sc_mcu7t5v0"

# SRAM Macro configuration
MACROS:
  {{ macro_name }}:
    gds:
      - "pdk_dir::libs.ref/gf180mcu_fd_ip_sram/gds/{{ macro_name }}.gds"
    lef:
      - "pdk_dir::libs.ref/gf180mcu_fd_ip_sram/lef/{{ macro_name }}.lef"
    lib:
      typical:
        - "pdk_dir::libs.ref/gf180mcu_fd_ip_sram/lib/{{ macro_name }}__tt_025C_5v00.lib"
    verilog:
      - "pdk_dir::libs.ref/gf180mcu_fd_ip_sram/verilog/{{ macro_name }}.v"

# Macro placements
# {{ fit.count }} SRAMs in {{ fit.cols }}x{{ fit.rows }} arrangement
MACRO_PLACEMENT:
{% for p in placements %}
  {{ p.name }}:
    macro: "{{ macro_name }}"
    x: {{ p.x }}
    y: {{ p.y }}
    orientation: {{ p.orientation }}
{% endfor %}

# Verilog sources
VERILOG_FILES:
  - "src/{{ chip.name }}_sram_array.sv"
  - "src/{{ chip.name }}_core.sv"
  - "src/{{ chip.name }}_top.sv"

# Synthesis settings
SYNTH_STRATEGY: "AREA 0"
SYNTH_FLATTEN_DESIGN: false

# Floor planning
FP_SIZING: "absolute"
FP_PIN_ORDER_CFG: "pin_order.cfg"

# Placement
PL_TARGET_DENSITY: 0.55
PL_ROUTABILITY_DRIVEN: true

# CTS (Clock Tree Synthesis)
CTS_CLK_BUFFER_LIST: "gf180mcu_fd_sc_mcu7t5v0__clkbuf_16 gf180mcu_fd_sc_mcu7t5v0__clkbuf_8"
CTS_ROOT_BUFFER: "gf180mcu_fd_sc_mcu7t5v0__clkbuf_16"

# Routing
GRT_ADJUSTMENT: 0.3
GRT_ALLOW_CONGESTION: true
RT_MIN_LAYER: "Metal2"
RT_MAX_LAYER: "Metal5"

# Power grid
FP_PDN_ENABLE_RAILS: true
PDN_CFG: "pdn_cfg.tcl"

# DRC/LVS
RUN_DRC: true
RUN_LVS: true
RUN_ANTENNA_CHECK: true

# Output
PRIMARY_GDSII_STREAMOUT_ARGS: "-units 1000 -merge_files"
